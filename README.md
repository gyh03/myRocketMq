# myRocketMq
rocketmq demo

自己对rocketmq的测试代码，已经验证结果：<br>
1、普通消息，broker双主，consumer集群负载均衡消费
发送10条消息，topic一直，轮询broker，向每个broker下每个queue(默认4个)发送一条消息，
即：broker-a，4个queue，每个queue一条；broker-b，4个queue，每个queue一条，依次轮询，
queueOffset为偏移量，queue顺序写顺序读，
发送消息结果如下：
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F000000000000035A, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=0], queueOffset=2]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F00000000000003E9, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=1], queueOffset=2]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000000478, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=2], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000000507, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=3], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8000002A9F000000000000023C, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-b, queueId=0], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8000002A9F00000000000002CB, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-b, queueId=1], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8000002A9F000000000000035A, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-b, queueId=2], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8000002A9F00000000000003E9, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-b, queueId=3], queueOffset=1]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000000596, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=0], queueOffset=3]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000000625, messageQueue=MessageQueue [topic=TopicTest1, brokerName=broker-a, queueId=1], queueOffset=3]
consumer接收消息如下：
consumer1>
ConsumeMessageThread_5 Receive New Messages: MessageExt [queueId=0, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856572, bornHost=/192.168.59.1:51956, storeTimestamp=1514882824712, storeHost=/192.168.59.128:10911, msgId=C0A83B8000002A9F000000000000023C, commitLogOffset=572, bodyCRC=378261293, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key4, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_7 Receive New Messages: MessageExt [queueId=2, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856637, bornHost=/192.168.59.1:51956, storeTimestamp=1514882824735, storeHost=/192.168.59.128:10911, msgId=C0A83B8000002A9F000000000000035A, commitLogOffset=858, bodyCRC=2022026753, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key6, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_6 Receive New Messages: MessageExt [queueId=1, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856630, bornHost=/192.168.59.1:51956, storeTimestamp=1514882824719, storeHost=/192.168.59.128:10911, msgId=C0A83B8000002A9F00000000000002CB, commitLogOffset=715, bodyCRC=1636630459, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key5, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_8 Receive New Messages: MessageExt [queueId=3, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856656, bornHost=/192.168.59.1:51956, storeTimestamp=1514882824755, storeHost=/192.168.59.128:10911, msgId=C0A83B8000002A9F00000000000003E9, commitLogOffset=1001, bodyCRC=260218519, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key7, WAIT=true, TAGS=TagA}, body=12]]
consumer2>
ConsumeMessageThread_2 Receive New Messages: MessageExt [queueId=3, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856566, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657064, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000000507, commitLogOffset=1287, bodyCRC=149904014, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key3, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_1 Receive New Messages: MessageExt [queueId=2, storeSize=143, queueOffset=1, sysFlag=0, bornTimestamp=1514882856563, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657060, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000000478, commitLogOffset=1144, bodyCRC=2145937944, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=2, KEYS=key2, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_4 Receive New Messages: MessageExt [queueId=0, storeSize=143, queueOffset=2, sysFlag=0, bornTimestamp=1514882856476, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657044, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F000000000000035A, commitLogOffset=858, bodyCRC=300288820, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=3, KEYS=key0, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_3 Receive New Messages: MessageExt [queueId=1, storeSize=143, queueOffset=2, sysFlag=0, bornTimestamp=1514882856552, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657052, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000003E9, commitLogOffset=1001, bodyCRC=1726036898, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=3, KEYS=key1, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_5 Receive New Messages: MessageExt [queueId=1, storeSize=143, queueOffset=3, sysFlag=0, bornTimestamp=1514882856676, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657173, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000000625, commitLogOffset=1573, bodyCRC=1748677520, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=4, KEYS=key9, WAIT=true, TAGS=TagA}, body=12]]
ConsumeMessageThread_6 Receive New Messages: MessageExt [queueId=0, storeSize=143, queueOffset=3, sysFlag=0, bornTimestamp=1514882856673, bornHost=/192.168.59.1:51955, storeTimestamp=1514911657170, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000000596, commitLogOffset=1430, bodyCRC=524124934, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest1, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=4, KEYS=key8, WAIT=true, TAGS=TagA}, body=12]]
发现：consumer使用多线程消费消息，增大并发量，多个queue之间无序，但同一个queueId，queueOffset顺序消费，但并不使用同一个线程所以，queueOffset在后，虽然发送较晚，但可能线程执行的快，所以也能会先被消费掉，不是顺序消费。

2、顺序消息，
2.1consumer单机
producer>
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000002793, messageQueue=MessageQueue [topic=TopicOrderTest, brokerName=broker-a, queueId=0], queueOffset=5]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F0000000000002826, messageQueue=MessageQueue [topic=TopicOrderTest, brokerName=broker-a, queueId=0], queueOffset=6]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F00000000000028B9, messageQueue=MessageQueue [topic=TopicOrderTest, brokerName=broker-a, queueId=0], queueOffset=7]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F000000000000294C, messageQueue=MessageQueue [topic=TopicOrderTest, brokerName=broker-a, queueId=0], queueOffset=8]
SendResult [sendStatus=SEND_OK, msgId=C0A83B8100002A9F00000000000029DF, messageQueue=MessageQueue [topic=TopicOrderTest, brokerName=broker-a, queueId=0], queueOffset=9]
consumer>
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=5, sysFlag=0, bornTimestamp=1514886964188, bornHost=/192.168.59.1:53617, storeTimestamp=1514915764709, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002793, commitLogOffset=10131, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=6, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=6, sysFlag=0, bornTimestamp=1514886964215, bornHost=/192.168.59.1:53617, storeTimestamp=1514915764715, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002826, commitLogOffset=10278, bodyCRC=1155558647, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=10, KEYS=KEY2, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 2
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=7, sysFlag=0, bornTimestamp=1514886964219, bornHost=/192.168.59.1:53617, storeTimestamp=1514915764719, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000028B9, commitLogOffset=10425, bodyCRC=870800481, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=10, KEYS=KEY3, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 3
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=8, sysFlag=0, bornTimestamp=1514886964220, bornHost=/192.168.59.1:53617, storeTimestamp=1514915764720, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F000000000000294C, commitLogOffset=10572, bodyCRC=763611586, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=10, KEYS=KEY4, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 4
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=9, sysFlag=0, bornTimestamp=1514886964222, bornHost=/192.168.59.1:53617, storeTimestamp=1514915764723, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000029DF, commitLogOffset=10719, bodyCRC=1518664020, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=10, KEYS=KEY5, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 5
order_1 1消息执行异常>
ConsumeMessageThread_1 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_2 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_3 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_4 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_5 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_6 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_7 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_8 > MessageExt [queueId=0, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514887449837, bornHost=/192.168.59.1:53801, storeTimestamp=1514916250346, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000002A72, commitLogOffset=10866, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
......
发现：producer将顺序消息发送到同一个queueId，mq按queue的顺序，把消息发送到consumer的同一个线程上。依次实现顺序消费。
如果顺序消息中某个消息执行异常，此消息之后的消息也不会执行，mq将不断重试失败消息，发送给其他的consumer或线程。

如果producer发送多个订单，并且多个订单不在同一个queueId，多订单之间并行消费，无序，但每个订单中的5个消息顺序消费。
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=25, sysFlag=0, bornTimestamp=1514888221040, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021588, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000003E8B, commitLogOffset=16011, bodyCRC=1575566669, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=26, KEYS=KEY1, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 1
ConsumeMessageThread_20 > MessageExt [queueId=1, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514888221105, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021607, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F000000000000416A, commitLogOffset=16746, bodyCRC=1605337876, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_2}, body=9]],内容：order_2 1
ConsumeMessageThread_1 > MessageExt [queueId=2, storeSize=147, queueOffset=10, sysFlag=0, bornTimestamp=1514888221123, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021624, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004449, commitLogOffset=17481, bodyCRC=1584261411, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=11, KEYS=KEY1, WAIT=true, TAGS=order_3}, body=9]],内容：order_3 1
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=26, sysFlag=0, bornTimestamp=1514888221092, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021593, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000003F1E, commitLogOffset=16158, bodyCRC=1155558647, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=27, KEYS=KEY2, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 2
ConsumeMessageThread_20 > MessageExt [queueId=1, storeSize=147, queueOffset=11, sysFlag=0, bornTimestamp=1514888221108, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021609, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000041FD, commitLogOffset=16893, bodyCRC=1185338030, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=12, KEYS=KEY2, WAIT=true, TAGS=order_2}, body=9]],内容：order_2 2
ConsumeMessageThread_1 > MessageExt [queueId=2, storeSize=147, queueOffset=11, sysFlag=0, bornTimestamp=1514888221131, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021632, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000044DC, commitLogOffset=17628, bodyCRC=1197783193, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=12, KEYS=KEY2, WAIT=true, TAGS=order_3}, body=9]],内容：order_3 2
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=27, sysFlag=0, bornTimestamp=1514888221097, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021598, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000003FB1, commitLogOffset=16305, bodyCRC=870800481, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=28, KEYS=KEY3, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 3
ConsumeMessageThread_20 > MessageExt [queueId=1, storeSize=147, queueOffset=12, sysFlag=0, bornTimestamp=1514888221110, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021611, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004290, commitLogOffset=17040, bodyCRC=832692792, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=13, KEYS=KEY3, WAIT=true, TAGS=order_2}, body=9]],内容：order_2 3
ConsumeMessageThread_1 > MessageExt [queueId=2, storeSize=147, queueOffset=12, sysFlag=0, bornTimestamp=1514888221135, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021636, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F000000000000456F, commitLogOffset=17775, bodyCRC=811829263, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=13, KEYS=KEY3, WAIT=true, TAGS=order_3}, body=9]],内容：order_3 3
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=28, sysFlag=0, bornTimestamp=1514888221099, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021601, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004044, commitLogOffset=16452, bodyCRC=763611586, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=29, KEYS=KEY4, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 4
ConsumeMessageThread_20 > MessageExt [queueId=1, storeSize=147, queueOffset=13, sysFlag=0, bornTimestamp=1514888221112, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021614, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004323, commitLogOffset=17187, bodyCRC=801470363, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=14, KEYS=KEY4, WAIT=true, TAGS=order_2}, body=9]],内容：order_2 4
ConsumeMessageThread_1 > MessageExt [queueId=2, storeSize=147, queueOffset=13, sysFlag=0, bornTimestamp=1514888221138, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021640, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004602, commitLogOffset=17922, bodyCRC=772218284, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=15, KEYS=KEY4, WAIT=true, TAGS=order_3}, body=9]],内容：order_3 4
ConsumeMessageThread_19 > MessageExt [queueId=0, storeSize=147, queueOffset=29, sysFlag=0, bornTimestamp=1514888221101, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021603, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000040D7, commitLogOffset=16599, bodyCRC=1518664020, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=30, KEYS=KEY5, WAIT=true, TAGS=order_1}, body=9]],内容：order_1 5
ConsumeMessageThread_20 > MessageExt [queueId=1, storeSize=147, queueOffset=14, sysFlag=0, bornTimestamp=1514888221118, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021620, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F00000000000043B6, commitLogOffset=17334, bodyCRC=1489127181, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=15, KEYS=KEY5, WAIT=true, TAGS=order_2}, body=9]],内容：order_2 5
ConsumeMessageThread_1 > MessageExt [queueId=2, storeSize=147, queueOffset=14, sysFlag=0, bornTimestamp=1514888221142, bornHost=/192.168.59.1:54165, storeTimestamp=1514917021643, storeHost=/192.168.59.129:10911, msgId=C0A83B8100002A9F0000000000004695, commitLogOffset=18069, bodyCRC=1493183802, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicOrderTest, flag=0, properties={MIN_OFFSET=0, MAX_OFFSET=15, KEYS=KEY5, WAIT=true, TAGS=order_3}, body=9]],内容：order_3 5

如果不同的订单，发送到同一个queue中，也会这两个订单也会按顺序消费，即10条消息按顺序被同一线程消费。
而且如果第一个订单有一条消息阻塞了(消费失败，不断重试)，第二条订单的消息也不会被消费，所以建议不同的消息使用不同的queueId。
